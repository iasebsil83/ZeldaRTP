<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<div hidden>
******************************************************************************************

    LICENCE :

    ZeldaRTP_Android_JS
    Copyright (C) 2019  Sebastien SILVANO
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    any later version.
    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
    You should have received a copy of the GNU General Public License
    along with this program.

    If not, see https://www.gnu.org/licenses.
</div>
<html>
<head></head>
<body>
 <audio id="musicA" controls autoplay loop hidden>
  <source id="music" src="start.mp3" type="audio/mpeg"></source>
 </audio>
 <audio id="soundA" controls autoplay hidden>
  <source id="sound" src="" type="audio/mpeg"></source>
 </audio>
 <div id="0"></div>
 <div id="1"></div>
 <div id="2"></div>
 <div id="3"></div>
 <div id="4"></div>
 <div id="5"></div>
 <div id="6"></div>
 <canvas id="c" width="336" height="112">
 </canvas>
 <br>
 <canvas id="void1" width="150" height="1">
 </canvas>
 <canvas id="z" width="150" height="150">
 </canvas>
 <canvas id="void2" width="160" height="1">
 </canvas>
 <canvas id="e" width="150" height="150">
 </canvas>
 <canvas id="i" width="150" height="150">
 </canvas>
 <canvas id="esc" width="150" height="150">
 </canvas>
 <br>
 <canvas id="q" width="150" height="150">
 </canvas>
 <canvas id="s" width="150" height="150">
 </canvas>
 <canvas id="d" width="150" height="150">
 </canvas>
 <canvas id="k" width="150" height="150">
 </canvas>
 <canvas id="l" width="150" height="150">
 </canvas>
 <canvas id="m" width="150" height="150">
 </canvas>
 <script language="javascript">
var maxh = 7;
var maxl = 21;
var bs = 16;
var screen = [];
var c = document.getElementById("c").getContext("2d");

//SOUNDS
var music = document.getElementById("music");
var sound = document.getElementById("sound");
function setMusic(name){
    music.src = name + ".mp3";
    musicA.load();
}
function setSound(name){
    sound.src = name + ".mp3";
    soundA.load();
}
function alreadyMusic(name){
    var old = music.src.split("/");
    old = old[old.length-1];
    if(old == name){
        return true;
    }else{
        return false;
    }
}

//GRAPHICS
function text(n,t){
    document.getElementById(n.toString()).innerHTML = t;
}
function d2D(x,y,element){
    x--;
    y--;
    for(var a=0; a < element.length; a++){
        screen[y][x] = element[a];
        x++;
    }
}
function show(){
    c.fillStyle = 'rgba(150,255,255,1)';
    c.fillRect(0,0,maxl*bs,maxh*bs);
    for(var y=0; y < maxh; y++){
        for(var x=0; x < maxl; x++){
            draw(bs*x,bs*y,screen[y][x]);
        }
    }
}
function clear(){
    for(var a=0; a < 7; a++){
        text(a,"");
    }
    screen = [
        [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
        [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
        [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
        [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
        [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
        [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],
        [" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "]];
}
function draw(x,y,tx){ //textures
    switch(tx){
    	case " ": //Air
    		c.fillStyle = 'rgba(150,255,255,1)';
    		c.fillRect(x,y,bs,bs);
    	break;
        case "&": //Bed's horizontal bar (Start scene)
        	c.fillStyle = 'rgba(165,90,40,1)';
        	c.fillRect(x,y+4,bs,bs-8);
        break;
        case "$": //Bed's vertical bar (Start scene)
        	c.fillStyle = 'rgba(165,90,40,1)';
        	c.fillRect(x+4,y,bs-8,bs);
        break;
        case "£": //Bed's left corner bar (Start scene)
        	c.fillStyle = 'rgba(165,90,40,1)';
        	c.fillRect(x+4,y+4,bs-4,bs-8);
        	c.fillRect(x+4,y+4,bs-8,bs-4);
        break;
        case "¤": //Bed's right corner bar (Start scene)
        	c.fillStyle = 'rgba(165,90,40,1)';
        	c.fillRect(x+4,y+4,bs-8,bs-4);
        	c.fillRect(x,y+4,bs-4,bs-8);
        break;
        case "°": //Link's head (sleeping in the Start scene)
        	c.fillStyle = 'rgba(215,140,90,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        	c.fillRect(x+12,y+7,4,2);
        break;
        case "µ": //Link's body (sleeping in the Start scene)
        	c.fillStyle = 'rgba(0,120,0,1)';
        	c.fillRect(x+4,y+2,2,bs-4);
        	c.fillRect(x,y+7,bs-4,2);
        break;
        case "_": //grass ground
        	c.fillStyle = 'rgba(50,120,20,1)';
        	c.fillRect(x,y,bs,bs);
        break;
        case "0": //Link's head
        	c.fillStyle = 'rgba(215,140,90,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        	c.fillRect(x+7,y+12,2,4);
        break;
        case "{": //Link's body seeing right
        	c.fillStyle = 'rgba(0,120,0,1)';
        	c.fillRect(x+7,y,2,bs-7);
        	c.fillRect(x+9,y+4,4,2);
        	c.fillRect(x+5,y+9,6,2);
        	c.fillRect(x+5,y+11,2,5);
        	c.fillRect(x+9,y+11,2,5);
        break;
        case "}": //Link's body seeing left
        	c.fillStyle = 'rgba(0,120,0,1)';
        	c.fillRect(x+7,y,2,bs-7);
        	c.fillRect(x+3,y+4,4,2);
        	c.fillRect(x+5,y+9,6,2);
        	c.fillRect(x+5,y+11,2,5);
        	c.fillRect(x+9,y+11,2,5);
        break;
        case "~": //Water
        	c.fillStyle = 'rgba(0,0,255,1)';
        	c.fillRect(x,y+5,bs,bs-5);
        break;
        case ")": //Right door
        	c.fillStyle = 'rgba(110,110,85,1)';
        	c.fillRect(x+8,y,8,bs);
        	c.fillRect(x,y,8,4);
        	c.fillRect(x,y+12,8,4);
        break;
        case "(": //Left door
        	c.fillStyle = 'rgba(110,110,85,1)';
        	c.fillRect(x,y,8,bs);
        	c.fillRect(x+8,y,8,4);
        	c.fillRect(x+8,y+12,8,4);
        break;
        case "I": //Basic stone block
        	c.fillStyle = 'rgba(110,110,110,1)';
        	c.fillRect(x,y,bs,bs);
        break;
        case "n": //Chest(Zelda_BO)
        	c.fillStyle = 'rgba(245,240,0)';
        	c.fillRect(x,y,bs,bs);
        	c.fillStyle = 'rgba(0,0,0,1)';
        	c.fillRect(x+4,y+7,bs-4,1);
        break;
        case "@": //Heart
        	c.fillStyle = 'rgba(255,0,0,1)';
        	c.fillRect(x+4,y+4,8,8);
        break;
        case ".": //No heart
        	c.fillStyle = 'rgba(90,90,90,1)';
        	c.fillRect(x+4,y+4,8,8);
        break;
        case "O": //Bomb
        	c.fillStyle = 'rgba(0,0,0,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        break;
        case "X": //Bomb fire
        	c.fillStyle = 'rgba(255,0,0,1)';
        	c.fillRect(x,y,bs,bs);
        	c.fillStyle = 'rgba(255,128,0,1)';
        	c.fillRect(x+4,y+4,8,8);
        	c.fillStyle = 'rgba(255,255,0,1)';
        	c.fillRect(x+6,y+6,4,4);
        break;
        case "-": //Sword
        	c.fillStyle = 'rgba(200,200,200,1)';
        	c.fillRect(x,y+7,bs-3,2);
        break;
        case "o": //Rock (Zelda_BO)
        	c.fillStyle = 'rgba(110,110,85,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        break;
        case "=": //Down ground (Zelda_BO)
        	c.fillStyle = 'rgba(50,120,20)';
        	c.fillRect(x,y+5,bs,bs-5);
        break;
        case "!": //Basic stone wall
        	c.fillStyle = 'rgba(110,110,110,1)';
        	c.fillRect(x+6,y,4,bs);
        break;
        case "y": //Activator OFF
        	c.fillStyle = 'rgba(245,245,255,1)';
        	c.fillRect(x+4,y+5,bs-8,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        break;
        case "Y": //Activator ON
        	c.fillStyle = 'rgba(245,245,255,1)';
        	c.fillRect(x+4,y+5,bs-8,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        	c.fillStyle = 'rgba(0,0,0,1)';
        	c.fillRect(x+5,y+5,bs-10,bs-10);
        break;
        case "Q": //Ghomas's head
        	y += 2;
        	c.fillStyle = 'rgba(0,0,0,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        	c.fillStyle = 'rgba(255,255,0,1)';
        	c.fillRect(x+4,y+7,bs-8,bs-14);
        	c.fillRect(x+7,y+4,bs-14,bs-8);
        	c.fillStyle = 'rgba(255,0,0,1)';
        	c.fillRect(x+7,y+7,bs-14,bs-14);
        break;
        case "/": //Ghomas's body
        	c.fillStyle = 'rgba(110,50,0,1)';
        	c.fillRect(x+7,y,2,bs-7);
        	c.fillRect(x+5,y+9,6,2);
        	c.fillRect(x+5,y+11,2,5);
        	c.fillRect(x+9,y+11,2,5);
        break;
        case "#": //Bush
        	c.fillStyle = 'rgba(0,200,0,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        break;
        case "P": //Gold Block (Zelda_GO : Throne)
        	c.fillStyle = 'rgba(225,225,0,1)';
        	c.fillRect(x,y,bs,bs);
        break;
        case "p": //Gold UpChair (Zelda_GO : Throne)
        	c.fillStyle = 'rgba(225,225,0,1)';
        	c.fillRect(x+6,y,bs-6,bs);
        break;
        case "§": //King Dodongo's body (and head)
        	c.fillStyle = 'rgba(0,120,0,1)';
        	c.fillRect(x,y,bs,bs);
        	c.fillStyle = 'rgba(255,0,0,1)';
        	c.fillRect(x+5,y+2,2,2);
        	c.fillRect(x+11,y+2,2,2);
        break;
        case "<": //King Dodongo's left side
        	c.fillStyle = 'rgba(0,120,0,1)';
        	c.fillRect(x+6,y,bs-6,bs);
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        break;
        case ">": //King Dodongo's right side
        	c.fillStyle = 'rgba(0,120,0,1)';
        	c.fillRect(x,y,bs-6,bs);
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        break;
        case "8": //Goron's head
        	c.fillStyle = 'rgba(255,255,0,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        break;
        case "l": //Goron's body
        	c.fillStyle = 'rgba(255,255,0,1)';
        	c.fillRect(x+4,y,8,bs);
        	c.fillRect(x,y+6,bs,4);
        break;
        case "L": //Goron's Legs
        	c.fillStyle = 'rgba(255,255,0,1)';
        	c.fillRect(x+2,y,bs-4,4);
        	c.fillRect(x+2,y+4,4,bs-4);
        	c.fillRect(x+10,y+4,4,bs-4);
        break;
        case ",": //Hookshot target
        	c.fillStyle = 'rgba(110,50,0,1)';
        	c.fillRect(x+4,y+5,bs-8,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        	c.fillStyle = 'rgba(255,0,0,1)';
        	c.fillRect(x+5,y+5,bs-10,bs-10);
        break;
        case "u": //Hylia's ground hole
        	c.fillStyle = 'rgba(110,110,85,1)';
        	c.fillRect(x,y+12,bs,4);
        	c.fillRect(x,y,4,bs-4);
        	c.fillRect(x+12,y,4,bs-4);
        break;
        case "+": //Hookshot focus
        	c.fillStyle = 'rgba(0,0,0,1)';
        	c.fillRect(x+2,y+7,bs-4,2);
        	c.fillRect(x+7,y+2,2,bs-4);
        break;
        case "V": //Zora's head
        	c.fillStyle = 'rgba(0,225,210,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        break;
        case "|": //Zora's body
        	c.fillStyle = 'rgba(0,225,210,1)';
        	c.fillRect(x+7,y,2,bs);
        	c.fillRect(x+4,y+7,bs-8,2);
        break;
        case "H": //Zora's legs
        	c.fillStyle = 'rgba(0,225,210,1)';
        	c.fillRect(x+4,y,bs-8,2);
        	c.fillRect(x+4,y+2,2,bs-2);
        	c.fillRect(x+10,y+2,2,bs-2);
        break;
        case "B": //Barinade's head
        	c.fillStyle = 'rgba(255,255,50,1)'
        	c.fillRect(x,y+12,bs,4);
        	c.fillRect(x,y,4,bs-4);
        	c.fillRect(x+12,y,4,bs-4);
        break;
        case "i": //Barinade's body
        	c.fillStyle = 'rgba(255,0,0,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        break;
        case "a": //Barinade's legs
        	c.fillStyle = 'rgba(215,215,50,1)';
        	c.fillRect(x+2,y,bs-4,4);
        	c.fillRect(x+2,y+4,4,bs-4);
        	c.fillRect(x+10,y+4,4,bs-4);
        break;
        case "A": //Ganondorf's head
        	c.fillStyle = 'rgba(165,90,10,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        	c.fillRect(x+7,y+12,2,4);
        break;
        case "d": //Ganondorf's body seeing right (weak)
        	c.fillStyle = 'rgba(200,0,0,1)';
        	c.fillRect(x+7,y,2,bs-7);
        	c.fillRect(x+9,y+4,4,2);
        	c.fillRect(x+5,y+9,6,2);
        	c.fillRect(x+5,y+11,2,5);
        	c.fillRect(x+9,y+11,2,5);
        break;
        case "D": //Ganondorf's body seeing right (strong)
        	c.fillStyle = 'rgba(0,0,0,1)';
        	c.fillRect(x+7,y,2,bs-7);
        	c.fillRect(x+9,y+4,4,2);
        	c.fillRect(x+5,y+9,6,2);
        	c.fillRect(x+5,y+11,2,5);
        	c.fillRect(x+9,y+11,2,5);
        break;
        case "g": //Ganondorf's body seeing left (weak)
        	c.fillStyle = 'rgba(200,0,0,1)';
        	c.fillRect(x+7,y,2,bs-7);
        	c.fillRect(x+3,y+4,4,2);
        	c.fillRect(x+5,y+9,6,2);
        	c.fillRect(x+5,y+11,2,5);
        	c.fillRect(x+9,y+11,2,5);
        break;
        case "G": //Ganondorf's body seeing left (strong)
        	c.fillStyle = 'rgba(0,0,0,1)';
        	c.fillRect(x+7,y,2,bs-7);
        	c.fillRect(x+3,y+4,4,2);
        	c.fillRect(x+5,y+9,6,2);
        	c.fillRect(x+5,y+11,2,5);
        	c.fillRect(x+9,y+11,2,5);
        break;
        case "*": //End's star (golden star)
        	c.fillStyle = 'rgba(225,225,0,1)';
        	c.fillRect(x+2,y+5,bs-4,bs-10);
        	c.fillRect(x+5,y+2,bs-10,bs-4);
        break;
    }
}
//

//INTERRACTIONS
var key = '';
//Init buttons
var z = document.getElementById('z');
var q = document.getElementById('q');
var s = document.getElementById('s');
var d = document.getElementById('d');
var e = document.getElementById('e');
var i = document.getElementById('i');
var esc = document.getElementById('esc');
var k = document.getElementById('k');
var l = document.getElementById('l');
var m = document.getElementById('m');
var zC = z.getContext('2d');
var qC = q.getContext('2d');
var sC = s.getContext('2d');
var dC = d.getContext('2d');
var eC = e.getContext('2d');
var iC = i.getContext('2d');
var escC = esc.getContext('2d');
var kC = k.getContext('2d');
var lC = l.getContext('2d');
var mC = m.getContext('2d');
//z zone texture
zC.beginPath();
zC.moveTo(10,10);
zC.lineTo(140,10);
zC.lineTo(140,140);
zC.lineTo(10,140);
zC.lineTo(10,10);
zC.moveTo(38,38);
zC.lineTo(113,38);
zC.lineTo(38,113);
zC.lineTo(113,113);
zC.stroke();
//q zone texture
qC.beginPath();
qC.moveTo(10,10);
qC.lineTo(140,10);
qC.lineTo(140,140);
qC.lineTo(10,140);
qC.lineTo(10,10);
qC.moveTo(75,75);
qC.lineTo(113,113);
qC.stroke();
qC.beginPath();
qC.arc(75,75,38,Math.PI*2,0);
qC.stroke();
//s zone texture
sC.beginPath();
sC.moveTo(10,10);
sC.lineTo(140,10);
sC.lineTo(140,140);
sC.lineTo(10,140);
sC.lineTo(10,10);
sC.stroke();
sC.beginPath();
sC.arc(75,55,19,Math.PI/2,1.7*Math.PI);
sC.stroke();
sC.beginPath();
sC.arc(75,93,19,1.5*Math.PI,2.7*Math.PI);
sC.stroke();
//d zone texture
dC.beginPath();
dC.moveTo(10,10);
dC.lineTo(140,10);
dC.lineTo(140,140);
dC.lineTo(10,140);
dC.lineTo(10,10);
dC.moveTo(55,38);
dC.lineTo(55,113);
dC.arc(55,75,38,1.5*Math.PI,2.5*Math.PI);
dC.stroke();
//i zone texture
iC.beginPath();
iC.moveTo(10,10);
iC.lineTo(140,10);
iC.lineTo(140,140);
iC.lineTo(10,140);
iC.lineTo(10,10);
iC.moveTo(55,38);
iC.lineTo(93,38);
iC.moveTo(75,38);
iC.lineTo(75,113);
iC.moveTo(55,113);
iC.lineTo(93,113);
iC.stroke();
//esc zone texture
escC.beginPath();
escC.moveTo(10,10);
escC.lineTo(140,10);
escC.lineTo(140,140);
escC.lineTo(10,140);
escC.lineTo(10,10);
escC.moveTo(38,38);
escC.lineTo(113,113);
escC.moveTo(113,38);
escC.lineTo(38,113);
escC.stroke();
//k zone texture
kC.beginPath();
kC.moveTo(10,10);
kC.lineTo(140,10);
kC.lineTo(140,140);
kC.lineTo(10,140);
kC.lineTo(10,10);
kC.moveTo(38,38);
kC.lineTo(38,113);
kC.moveTo(38,75);
kC.lineTo(113,38);
kC.moveTo(38,75);
kC.lineTo(113,113);
kC.stroke();
//l zone texture
lC.beginPath();
lC.moveTo(10,10);
lC.lineTo(140,10);
lC.lineTo(140,140);
lC.lineTo(10,140);
lC.lineTo(10,10);
lC.moveTo(38,38);
lC.lineTo(38,113);
lC.lineTo(113,113);
lC.stroke();
//m zone texture
mC.beginPath();
mC.moveTo(10,10);
mC.lineTo(140,10);
mC.lineTo(140,140);
mC.lineTo(10,140);
mC.lineTo(10,10);
mC.moveTo(38,113);
mC.lineTo(38,38);
mC.lineTo(75,75);
mC.lineTo(113,38);
mC.lineTo(113,113);
mC.stroke();
//e zone texture
eC.beginPath();
eC.moveTo(10,10);
eC.lineTo(140,10);
eC.lineTo(140,140);
eC.lineTo(10,140);
eC.lineTo(10,10);
eC.moveTo(113,38);
eC.lineTo(38,38);
eC.lineTo(38,113);
eC.lineTo(113,113);
eC.moveTo(38,75);
eC.lineTo(75,75);
eC.stroke();

z.addEventListener('mousemove',function(event){
	key = "z";
},false);
q.addEventListener('mousemove',function(event){
	key = "q";
},false);
s.addEventListener('mousemove',function(event){
	key = "s";
},false);
d.addEventListener('mousemove',function(event){
	key = "d";
},false);
e.addEventListener('mousemove',function(event){
	key = "return";
},false);
i.addEventListener('mousemove',function(event){
	key = "i";
},false);
esc.addEventListener('mousemove',function(event){
	key = "esc";
},false);
k.addEventListener('mousemove',function(event){
	key = "k";
},false);
l.addEventListener('mousemove',function(event){
	key = "l";
},false);
m.addEventListener('mousemove',function(event){
	key = "m";
},false);

//DECLARATIONS (All the game vars are globals)
var lifeMax = 3;
var life = 3;
var story = 0;
var warp = 6;
var HyGoing = 8;
var right = true;
var label = "theta";
var x = 11;
var y = 6;
var bombCnt = 0;
var end = false;
var cnt = 0;
var sCooX,bCooX,bCooY,Spos,Sright,Scnt,unlocked,Bcnt,Blife,Bpos,hookX,hookY,hookOk;
clear();

//IA's "CODE" SYSTEM
var code = 0;
var oldCode = -1;
setInterval(main,10);
function main(){
	if(oldCode != code){
		oldCode = code;
		inits(code);
		key = '';
	}
    mains(code);
}

function inits(n){
    clear();
    switch(n){
        case 0: //Menu destopper
            setMusic("start");
            text(0,"~~~~~~~~~~~~~~~~~~~");
            text(1,"}The..Lengend..Of.Link{");
            text(2,"}Rescue....The...Princess{");
            text(3,"~~~~~~~~~~~~~~~~~~~");
            text(4,"}Appuyez.sur.une.touche{");
            text(5,"}........Pour..continuer......{");
            text(6,"~~~~~~~~~~~~~~~~~~~");
        break;
        case 1: //Menu
            setMusic("startSelect");
            text(0,"~~~~~~~~~~~~~~~~~~~");
            text(1,"}Jouer................[entrer]{");
            text(2,"~~~~~~~~~~~~~~~~~~~");
            text(3,"}............Contrôles.........{");
            text(4,"}Inventaire................[i]{");
            text(5,"}Items(3)........[k][l][m]{");
            text(6,"~~~~~~~~~~~~~~~~~~~");
        break;
        case 2: //Text... (Start)
            text(0,"Il  etait  une  fois  ...");
            text(1," ");
            text(2,"=====[entrer]====");
        break;
        case 3: //...
            text(0,"Dans  la  forêt  Kokiri,");
            text(1,"  alors  qu'un  enfant");
            text(2,"=====[entrer]====");
        break;
        case 4: //...
            d2D(9,2,"°µ");
            d2D(6,3,"£&&&&¤");
            d2D(6,4,"$    $");
            d2D(1,5,"_____________________");
            d2D(1,6,"_____________________");
            d2D(1,7,"_____________________");
            text(0,"dormait  paisiblement,");
            text(1,"    un  cri  retentit  :");
            text(2,"=====[entrer]====");
        break;
        case 5: //...
            d2D(9,2,"°µ");
            d2D(6,3,"£&&&&¤");
            d2D(6,4,"$    $");
            d2D(1,5,"_____________________");
            d2D(1,6,"_____________________");
            d2D(1,7,"_____________________");
            text(0,"  'Link!  Le  vénérable");
            text(1,"  arbre  Mojo  est  très");
            text(2,"=====[entrer]====");
        break;
        case 6: //...
            d2D(9,2,"°µ");
            d2D(6,3,"£&&&&¤");
            d2D(6,4,"$    $");
            d2D(1,5,"_____________________");
            d2D(1,6,"_____________________");
            d2D(1,7,"_____________________");
            text(0,"malade.Il  faut  que  tu");
            text(1,"  viennes  le  sauver!");
            text(2,"=====[entrer]====");
        break;
        case 7: //...
            d2D(9,2," ");
            show();
            d2D(9,1,"0");
            d2D(9,2,"{");
            d2D(6,3,"£&&&&¤");
            d2D(6,4,"$    $");
            d2D(1,5,"_____________________");
            d2D(1,6,"_____________________");
            d2D(1,7,"_____________________");
            text(0,"          VIIIITE  !!!");
            text(1," ");
            text(2,"=====[entrer]====");
        break;
        case 8: //Zelda_KO
            if(!(alreadyMusic("kokiri.mp3"))){
                setMusic("kokiri");
            }
            x = 11;
            y = 6;
        break;
        case 9: //Zelda_BO
        	if(!(alreadyMusic("kokiri.mp3"))){
                setMusic("kokiri");
            }
            right = true;
            x = 20;
            Spos = 6;
            Sright = false;
            Scnt = 0;
            bombCnt = 0;
            bCooX = 0;
        break;
        case 10: //Zelda_AR
        	if(!(alreadyMusic("kokiri.mp3"))){
                setMusic("kokiri");
            }
            right = true;
            unlocked = 0;
            sCooX = 2;
            Bcnt = 0;
            Blife = 7;
            Bpos = 21;
        break;
        case 11: //Zelda_HY
            if(!(alreadyMusic("hyrule.mp3"))){
                setMusic("hyrule");
            }
            if(HyGoing == 1){
                x = 20;
                y = 3;
            }else if(HyGoing == 5){
                x = 8;
                y = 3;
            }else if(HyGoing == 8){
                x = 7;
                y = 6;
            }else if(HyGoing == 11){
                x = 2;
                y = 5;
            }
            bombCnt = 0;
            bCooX = 0;
        break;
        case 12: //Zelda_MT
            if(!(alreadyMusic("hyrule.mp3"))){
                setMusic("hyrule");
            }
            x = 2;
            y = 6;
            bombCnt = 0;
            bCooX = 0;
            right = true;
        break;
        case 13: //Zelda_GO
            setMusic("goronCity");
            x = 2;
            y = 6;
            bombCnt = 0;
            bCooX = 0;
        break;
        case 14: //Zelda_DO
            setMusic("dodongo");
            x = 3;
            y = 6;
            Bcnt = 0;
            Blife = 7;
            Bpos = 20;
            bombCnt = 0;
        break;
        case 15: //Zelda_LA
            if(!(alreadyMusic("hyrule.mp3"))){
                setMusic("hyrule");
            }
            x = 2;
            y = 6;
            right = true;
            hookX = x;
            hookY = y;
            hookOk = false;
            unlocked = 0;
        break;
        case 16: //Zelda_ZO
            setMusic("zoras");
            x = 2;
            y = 7;
            right = true;
        break;
        case 17: //Zelda_JA
            setMusic("jabuJabu");
            x = 2;
            y = 7;
            hookOk = false;
            hookX = 0;
            hookY = 0;
            Bcnt = 0;
            Bpos = 21;
            Blife = 4;
            unlocked = 0;
            right = true;
        break;
        case 18: //Zelda_CH
        	if(!(alreadyMusic("hyrule.mp3"))){
                setMusic("hyrule");
            }
            x = 20;
            y = 6;
            bombCnt = 0;
            bCooX = 0;
            hookOk = false;
            hookX = x;
            hookY = y;
        break;
        case 19: //Zelda_BF
            setMusic("ganondorfFight");
            x = 21;
            y = 6;
            bombCnt = 0;
            bCooX = 0;
            hookX = x;
            hookY = y;
            hookOk = false;
            Blife = 4;
            Bcnt = 0;
            Bpos = 1;
            Bstate = 0;
            BstateCnt = 0;
            sCooX = 0;
            Bright = true;
        break;
        case 20: //Zelda_0
            setMusic("gameOver");
            lifeMax = 3;
            story = 0;
            text(0,"~~~~~~~~~~~~~~~");
            text(1,"===Game=Over===");
            text(2,"~~~~~~~~~~~~~~~");
            text(3,"}Try.again....[enter]{");
            text(4,"~~~~~~~~~~~~~~~");
            text(5,"}..............................{");
            text(6,"~~~~~~~~~~~~~~~");
            if(key == "return"){
                life = lifeMax;
                code = 0; //ZeldaRTP
            }
        break;
        case 21: //Zelda_M
            setMusic("startSelect");
            text(0,"~~~~~Start~~~~~")
            text(1,"}[.......................]{")
            text(2,"}[.......................]{")
            text(3,"}[.......................]{")
            text(4,"}[.......................]{")
            text(5,"}[.......................]{")
            text(6,"}[.......................]{")
            if(story >= 1){
                text(1,"}[  Epée  Kokiri    ]{");
                text(2,"}[  assignée  à  :  [k]  ]{");
            }
            if(story >= 3){
                text(3,"}[  Bombes  Gorons    ]{");
                text(4,"}[  assignées  à  :  [l]  ]{");
            }
            if(story >= 6){
                text(5,"}[  Grappin    ]{");
                text(6,"}[  assigné  à  :  [m]  ]{");
            }
        break;
        case 22: //Text... (Zelda_BO)
            setSound("item");
            text(0,"Tu  as  obtenu  l'épée");
            text(1,"Kokiri  !     ...");
            text(2,"=====[entrer]====");
        break;
        case 23: //...
            text(0,"Oh!  Un  chemin  s'est");
            text(1,"ouvert  !");
            text(2,"=====[entrer]====");
        break;
        case 24: //Text... (Zelda_AR)
            setMusic("");
            setSound("win");
            text(0,"Tu  as  vaincu  Ghomas  !")
            text(1,"Hyrule  t'attends  maintenant.");
            text(2,"=====[entrer]====");
        break;
        case 25: //Text... (Zelda_GO)
            setMusic("goronCity");
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"  Hey  !!!  Regardez  à");
            text(1,"l'entrée  du  village");
            text(2,"=====[entrer]====");
        break;
        case 26: //...
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"Oh!  La  légende  s'est")
            text(1,"accomplie!  Tu  es  le")
            text(2,"=====[entrer]====");
        break;
        case 27: //...
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"  sauveur  que  nous");
            text(1,"  attendions  pour");
            text(2,"=====[entrer]====");
        break;
        case 28: //...
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"nous  sauver  du  roi");
            text(1,"  Dodongo  qui  nous");
            text(2,"=====[entrer]====");
        break;
        case 29: //...
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"  bloque  l'accès  à");
            text(1,"  nos  réserves  pour");
            text(2,"=====[entrer]====");
        break;
        case 30: //...
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"l'hivers.  Prends  ça");
            text(1,"  héros,  ça  te  sera");
            text(2,"=====[entrer]====");
        break;
        case 31: //...
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"  surement  utile.");
            text(1,"Bonne  chance  Link  !");
            text(2,"=====[entrer]====");
        break;
        case 32: //...
            setSound("item");
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"  Tu  as  obtenu  des");
            text(1,"  bombes  Gorons  !");
            text(2,"=====[entrer]====");
        break;
        case 33: //...
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"0   l l   l  l     lp");
            d2D(1,6,"{   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            text(0,"  Nous  t'ouvrons  la");
            text(1,"  grotte  hero   ...");
            text(2,"=====[entrer]====");
        break;
        case 34: //Text... (Zelda_DO)
            setMusic("");
            setSound("win");
            text(0,"Tu  as  vaincu  King")
            text(1,"Dodongo!  Maintenant,  Hylia!");
            text(2,"=====[entrer]====");
        break;
        case 35: //Text... (Zelda_ZO)
            setMusic("zoras");
            d2D(1,5,"    V  V  V V  V V");
            d2D(1,6," 0  |  |  | |  | |");
            d2D(1,7,"({~~H~~H~~H~H~~H~H~~~");
            text(0,"  Je  savais  que  tu");
            text(1,"arriverais  un  jour");
            text(2,"=====[entrer]====");
        break;
        case 36: //...
            d2D(1,5,"    V  V  V V  V V");
            d2D(1,6," 0  |  |  | |  | |");
            d2D(1,7,"({~~H~~H~~H~H~~H~H~~~");
            text(0,"pour  nous  sauver  de");
            text(1,"Barinade,  l'anémone");
            text(2,"=====[entrer]====");
        break;
        case 37: //...
            d2D(1,5,"    V  V  V V  V V");
            d2D(1,6," 0  |  |  | |  | |");
            d2D(1,7,"({~~H~~H~~H~H~~H~H~~~");
            text(0,"infernale. Tiends, ");
            text(1,"prends ca guerrier!");
            text(2,"=====[entrer]====");
        break;
        case 38: //...
            setSound("item");
            d2D(1,5,"    V  V  V V  V V");
            d2D(1,6," 0  |  |  | |  | |");
            d2D(1,7,"({~~H~~H~~H~H~~H~H~~~");
            text(0,"  Tu  as  obtenu  un");
            text(1,"     Grappin  !!!");
            text(2,"=====[entrer]====");
        break;
        case 39: //Text... (Zelda_JA)
            setMusic("");
            setSound("win");
            text(0,"Tu  as  vaincu  Barinade!")
            text(1,"Ganondorf, à nous!!!");
            text(2,"=====[entrer]====");
        break;
        case 40: //Text... (Zelda_BF)
            setMusic("");
            setSound("ganondorf");
            text(0,"Tiends  donc  !  Je");
            text(1,"t'attendais  vermine");
            text(2,"=====[entrer]====");
        break;
        case 41: //End
            setMusic("theme");
            x = 1;
            y = 1;
        break;
    }
    show();
}
function mains(n){
    switch(n){
        case 0: //menu Destopper
            if(key != ''){
                code++;
            }
        break;
        case 1: //menu
            if(key == "return"){
                code++;
            }
        break;
        case 2: //text...
            if(key == "return"){
                code++;
            }
        break;
        case 3: //...
            if(key == "return"){
                code++;
            }
        break;
        case 4: //...
            if(key == "return"){
                code++;
            }
        break;
        case 5: //...
            if(key == "return"){
                code++;
            }
        break;
        case 6: //...
            if(key == "return"){
                code++;
            }
        break;
        case 7: //...
            if(key == "return"){
                code++;
            }
        break;
        case 8: //Zelda_KO
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(2,5,"                     ");
            d2D(1,6,"(               ()  )");
            d2D(1,7,"____~~~~~~~__________");
            if(key == "q"){
                right = false;
                x--;
            }
            if(key == "d"){
                right = true;
                x++;
            }
            if(key == "i"){
                warp = 1;
                code = 21; //Zelda_M
            }
            if(key == "k" && x != 1 && x != 21 && story != 0 && y == 6){
                setSound("sword");
                if(right){
                    d2D(x+1,6,"-");
                }else{
                    d2D(x-1,6,"-");
                }
            }
            if(key == "l" && bombCnt == 0 && x != 1 && x != 21 && story >= 3){
                setSound("bombFuse");
                if(right){
                    bCooX = x+1;
                }else{
                    bCooX = x-1;
                }
                bombCnt = 120;
            }
            if(bombCnt > 0){
                bombCnt--;
                d2D(bCooX,6,"O");
            }
            if(bombCnt < 20 && bombCnt != 0){
                setSound("bombBlow");
                d2D(bCooX,6,"X");
                if(bCooX-1 != 0){
                    d2D(bCooX-1,6,"X");
                }
                if(bCooX+1 != 22){
                    d2D(bCooX+1,6,"X");
                }
                if((x == bCooX-1 || x == bCooX || x == bCooX+1) && bombCnt == 1){
                    setSound("lostLife");
                    life--;
                }
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            if(key == "z" && (x == 17 || x == 18)){
                code = 9; //Zelda_BO
            }
            if(x > 4 && x < 12){
                y = 7;
            }else{
                y = 6;
            }
            if(x < 2){
                x = 2;
                if(story == 1){
                    code = 10; //Zelda_AR
                }
            }
            if(x > 20){
                x = 20;
                if(story >= 2){
                    HyGoing = 1;
                    code = 11; //Zelda_HY
                }
            }
            d2D(x,y-1,"0");
            if(right){
                d2D(x,y,"{");
            }else{
                d2D(x,y,"}");
            }
            key = '';
            show();
        break;
        case 9: //Zelda_BO
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,5,"    III     III      ");
            d2D(1,6,"n   I I     I I     )");
            d2D(1,7,"_____=========_______");
            if(key == "q" && x > 2){
                right = false;
                x--;
            }
            if(key == "d"){
                right = true;
                x++;
            }
            if(key == "z"){
                if(x == 6){
                    x = 14;
                }else if(x == 14){
                    x = 6;
                }
            }
            if(key == "i"){
                warp = 2;
                code = 21; //Zelda_M
            }
            if(key == "k" && x != 1 && x != 21 && story != 0){
                setSound("sword");
                if(right){
                    d2D(x+1,6,"-");
                }else{
                    d2D(x-1,6,"-");
                }
            }
            if(key == "l" && bombCnt == 0 && x != 1 && x != 21 && story >= 3){
                setSound("bombFuse");
                if(right){
                    bCooX = x+1;
                }else{
                    bCooX = x-1;
                }
                bombCnt = 120;
            }
            if(bombCnt > 0){
                bombCnt--;
                d2D(bCooX,6,"O");
            }
            if(bombCnt < 20 && bombCnt != 0){
                setSound("bombBlow");
                d2D(bCooX,6,"X");
                if(bCooX-1 != 0){
                    d2D(bCooX-1,6,"X");
                }
                if(bCooX+1 != 22){
                    d2D(bCooX+1,6,"X");
                }
                if((x == bCooX-1 || x == bCooX || x == bCooX+1) && bombCnt == 1){
                    setSound("lostLife");
                    life--;
                }
            }
            Scnt++;
            if(Scnt == 50){
                Scnt = 0
                if(Sright){
                    Spos++;
                }else{
                    Spos--;
                }
                if(x == Spos){
                    setSound("lostLife");
                    life--;
                }
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            if(key == "return" && x == 2 && story == 0){
                story = 1;
                code = 22;
            }
            if(Spos < 7){
                Sright = true;
            }else if(Spos > 13){
                Sright = false;
            }
            if(x > 20){
                code = 8; //Zelda_KO
            }
            d2D(Spos,6,"o");
            d2D(x,5,"0");
            if(right){
                d2D(x,6,"{");
            }else{
                d2D(x,6,"}");
            }
            key = '';
            show();
        break;
        case 10: //Zelda_AR
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,5,"                     ");
            d2D(1,6,"(  #                 ");
            d2D(1,7,"_____________________");
            for(var a=1; a < 5; a++){
                d2D(10,a,"!");
            }
            if(key == "q"){
                right = false;
                x--;
            }
            if(key == "d" && x < 21){
                right = true;
                x++;
            }
            if(x == 1){
                code  = 8; //Zelda_KO
            }
            if(x > 9 && unlocked == 0){
                x = 9;
            }
            if(x < 11 && unlocked == 2){
                x = 11;
            }
            if(x == 22){
                x = 21;
            }
            if(key == "i"){
                warp = 3;
                code = 21; //Zelda_M
            }
            if(key == "k"){
                setSound("sword");
                sCooX = x;
                if(!(right) && x > 1){
                    sCooX--;
                }
                if(right && x < 21){
                    sCooX++;
                }
                d2D(sCooX,6,"-");
                if(sCooX == Bpos){
                    Blife--;
                }
                if(sCooX == 4){
                    life++;
                }
                if(sCooX == 7){
                     d2D(10,6," ");
                    unlocked = 1;
                }
            }
            if(Blife == 0){
                lifeMax = 4;
                life = 4;
                story = 2;
                code = 24;
            }
            if(unlocked == 1 && x > 10){
                unlocked = 2;
                setMusic("boss");
            }
            if(unlocked == 2){
                Bcnt++;
            }
            if(Bcnt == 150){
                Bcnt = parseInt(2*Math.random()-0.1);
                if(Bcnt == 0 && Bpos > 11){
                    Bpos--;
                }
                if(Bcnt == 1 && Bpos < 21){
                    Bpos++;
                }
                Bcnt = 0;
                if(Bpos == x){
                    setSound("lostLife");
                    life--;
                }
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            if(life > lifeMax){
                life = lifeMax;
            }
            if(unlocked != 1){
                d2D(10,6,"!");
                d2D(7,6,"y");
            }else{
                d2D(7,6,"Y");
            }
            d2D(Bpos,5,"Q");
            d2D(Bpos,6,"/");
            d2D(x,5,"0");
            if(right){
                d2D(x,6,"{");
            }else{
                d2D(x,6,"}");
            }
            key = ''; 
            show();
        break;
        case 11: //Zelda_HY
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,2,"IIIIIII_IIIIIIIIIIIII");
            d2D(1,6,"I___________________I");
            d2D(1,3,"I____________________");
            d2D(1,4,"I___________________I");
            d2D(1,5,"____________________I");
            d2D(1,7,"IIIIII_IIIIIIIIIIIIII");
            if(key == "q"){
                right = false;
                x--;
            }
            if(key == "d"){
                right = true;
                x++;
            }
            if(key == "z"){
                y--;
            }
            if(key == "s"){
                y++;
            }
            if(key == "i"){
                warp = 4;
                code = 21; //Zelda_M
            }
            if(key == "k" && x != 1 && x != 21){
                setSound("sword");
                if(right){
                    d2D(x+1,y,"-");
                }else{
                    d2D(x-1,y,"-");
                }
            }
            if(key == "l" && bombCnt == 0 && x != 1 && x != 21 && story >= 3){
                setSound("bombFuse");
                if(right){
                    bCooX = x+1;
                }else{
                    bCooX = x-1;
                }
                bombCnt = 120;
            }
            if(bombCnt > 0){
                bombCnt--;
                d2D(bCooX,6,"O");
            }
            if(bombCnt < 20 && bombCnt != 0){
                setSound("bombBlow");
                d2D(bCooX,6,"X");
                if(bCooX-1 != 0){
                    d2D(bCooX-1,6,"X");
                }
                if(bCooX+1 != 22){
                    d2D(bCooX+1,6,"X");
                }
                if((x == bCooX-1 || x == bCooX || x == bCooX+1) && bombCnt == 1){
                    setSound("lostLife");
                    life--;
                }
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            if(x == 8 && y == 2){
                code = 12; //Zelda_MT
            }
            if(x == 21 && y == 3){
                code = 8; //Zelda_KO
            }
            if(x == 7 && y == 7){
                code = 15; //Zelda_LA
            }
            if(x == 1 && y == 5)
                code = 18; //Zelda_CH
            if(x < 2){
                x = 2;
            }
            if(x > 20){
                x = 20;
            }
            if(y < 3){
                y = 3;
            }
            if(y > 6){
                y = 6;
            }
            d2D(x,y,"0");
            key = '';
            show();
        break;
        case 12: //Zelda_MT
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(14,1,"        ");
            d2D(11,2,"          )");
            d2D(8,3,"       IIIIIII");
            d2D(5,4,"       III      )");
            d2D(1,5,"        IIIIIIIIIIIII");
            d2D(1,6,"(    IIIIIIIIIIIIIIII");
            d2D(1,7,"_____________________");
            if(key == "q"){
                right = false;
                x--;
                if((x == 5 && y == 5) || (x == 8 && y == 4) || (x == 11 && y == 3) || (x == 14 && y == 2)){
                    y++;
                }
            }
            if(key == "d"){
                right = true;
                x++;
                if((x == 6 && y == 6) || (x == 9 && y == 5) || (x == 12 && y == 4) || (x == 15 && y == 3)){
                    y--;
                }
            }
            if(key == "i"){
                warp = 5;
                code = 21; //Zelda_M
            }
            if(key == "k"){
                setSound("sword");
                if(right){
                    d2D(x+1,y,"-");
                }else{
                    d2D(x-1,y,"-");
                }
            }
            if(key == "l" && bombCnt == 0 && x != 1 && x != 21 && story >= 3){
                setSound("bombFuse");
                if(right){
                    bCooX = x+1;
                }else{
                    bCooX = x-1;
                }
                bCooY = y;
                bombCnt = 120;
            }
            if(bombCnt > 0){
                bombCnt--;
                d2D(bCooX,bCooY,"O");
            }
            if(bombCnt < 20 && bombCnt != 0){
                setSound("bombBlow");
                d2D(bCooX,bCooY,"X");
                if(bCooX-1 != 0){
                    d2D(bCooX-1,bCooY,"X");
                }
                if(bCooX+1 != 22){
                    d2D(bCooX+1,bCooY,"X");
                }
                if((x == bCooX-1 || x == bCooX || x == bCooX+1) && bombCnt == 1 && bCooY == y){
                    setSound("lostLife");
                    life--;
                }
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            if(key == "s" && x == 12){
                y = 4;
            }
            if(story != 3){
                if(x > 19 && y == 4){
                    x = 19;
                }
                d2D(20,4,"o");
            }
            if(x < 2){
                HyGoing = 5;
                code = 11; //Zelda_HY
            }
            if(x > 20){
                if(y == 4){
                    code = 14; //Zelda_DO
                }else if(y == 2){
                    if(story == 2){
                        story = 3;
                        code = 25;
                    }else{
                        code = 13; //Zelda_GO
                    }
                }
            }
            d2D(x,y-1,"0");
            if(right){
                d2D(x,y,"{");
            }else{
                d2D(x,y,"}");
            }
            key = '';
            show();
        break;
        case 13: //Zelda_GO
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,4,"    8 8   8  8     8");
            d2D(1,5,"    l l   l  l     lp");
            d2D(1,6,"(   L L   L  L    PPP");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            if(key == "q"){
                right = false;
                x--;
            }
            if(key == "d" && x < 18){
                right = true;
                x++;
            }
            if(key == "i"){
                warp = 6;
                code = 21; //Zelda_M
            }
            if(key == "k" && x != 1 && x != 21){
                setSound("sword");
                if(right){
                    d2D(x+1,6,"-");
                }else{
                    d2D(x-1,6,"-");
                }
            }
            if(key == "l" && bombCnt == 0 && x != 1 && x != 21 && story >= 3){
                setSound("bombFuse");
                if(right){
                    bCooX = x+1;
                }else{
                    bCooX = x-1;
                }
                bombCnt = 120;
            }
            if(bombCnt > 0){
                bombCnt--;
                d2D(bCooX,6,"O");
            }
            if(bombCnt < 20 && bombCnt != 0){
                setSound("bombBlow");
                d2D(bCooX,6,"X");
                if(bCooX-1 != 0){
                    d2D(bCooX-1,6,"X");
                }
                if(bCooX+1 != 22){
                    d2D(bCooX+1,6,"X");
                }
                if((x == bCooX-1 || x == bCooX || x == bCooX+1) && bombCnt == 1){
                    setSound("lostLife");
                    life--;
                }
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            if(x == 1){
                code = 12; //Zelda_MT
            }
            d2D(x,5,"0");
            if(right){
                d2D(x,6,"{");
            }else{
                d2D(x,6,"}");
            }
            key = '';
            show();
        break;
        case 14: //Zelda_DO
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,5,"                     ");
            d2D(1,6,"(                    ");
            d2D(1,7,"_____________________");
            if(key == "q"){
                right = false;
                x--;
            }
            if(key == "d" && x < 21){
                right = true;
                x++;
            }
            if(key == "i"){
                warp = 7;
                code = 21; //Zelda_M
            }
            if(x < 2 && Blife == 7){
                code = 12; //Zelda_MT
            }
            if(x < 3 && Blife != 7){
                x = 3;
            }
            if(key == "k" && x != 21){
                setSound("sword");
                if(right){
                    d2D(x+1,6,"-");
                }else{
                    d2D(x-1,6,"-");
                }
            }
            if(key == "l" && bombCnt == 0 && x != 1 && x != 21){
                setSound("bombFuse");
                if(right){
                    bCooX = x+1;
                }else{
                    bCooX = x-1;
                }
                bombCnt = 120;
            }
            if(bombCnt > 0){
                bombCnt--;
                d2D(bCooX,6,"O");
            }
            if(bombCnt < 20 && bombCnt != 0){
                setSound("bombBlow");
                d2D(bCooX,6,"X");
                if(bCooX-1 != 0){
                    d2D(bCooX-1,6,"X");
                }
                if(bCooX+1 != 22){
                    d2D(bCooX+1,6,"X");
                }
                if(bCooX < Bpos+3 && bCooX > Bpos-3 && bombCnt == 1){
                    Blife--;
                }
                if((x == bCooX-1 || x == bCooX || x == bCooX+1) && bombCnt == 1){
                    setSound("lostLife");
                    life--;
                }
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            if(Blife == 0){
                lifeMax = 5;
                life = 5;
                story = 5;
                code = 34;
            }
            if(Blife != 7){
                if(!(alreadyMusic("boss.mp3"))){
                    setMusic("boss");
                }
                Bcnt++;
            }
            if(Bcnt == 230){
                if(x == Bpos || x == Bpos-1 || x == Bpos+1){
                    setSound("lostLife");
                    life--;
                }
                if(x < Bpos){
                    Bpos--;
                }
                if(x > Bpos){
                    Bpos++;
                }
                Bcnt = 0;
            }
            if(Bpos == 1){
                Bpos = 2;
            }
            if(Bpos == 21){
                Bpos = 20;
            }
            if(Blife != 7){
                d2D(2,6,"o");
            }
            d2D(Bpos-1,6,"<§>");
            d2D(x,5,"0");
            if(right){
                d2D(x,6,"{");
            }else{
                d2D(x,6,"}");
            }
            key = '';
            show();
        break;
        case 15: //Zelda_LA
            d2D(1,1,"                     ");
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,2,"                     ");
            d2D(1,3,"             ,       ");
            d2D(1,4,"(          _u___     ");
            d2D(1,5,"______     IIIII~~~~~");
            d2D(1,6,"IIIIII~~~~~IIIII~~~~~");
            d2D(1,7,"IIIII(~~~~~IIIII~~~~~");
            if(hookOk){
                if(key == "q" && hookX > 1 && hookX > x-5){
                    hookX--;
                }
                if(key == "d" && hookX < 21 && hookX < x+5){
                    hookX++;
                }
                if(key == "z" && hookY > 1 && hookY > y-5){
                    hookY--;
                }
                if(key == "s" && hookY < 7 && hookY < y+5){
                    hookY++;
                }
                d2D(hookX,hookY,"+");
                if(key == "return"){
                    setSound("hookshot");
                    hookOk = false;
                    if(hookX == 14 && hookY == 3){
                        x = 14;
                        y = 3;
                        unlocked = 1;
                    }
                }
            }else{
                if(key == "q"){
                    right = false;
                    x--;
                }
                if(key == "d" && x < 21){
                    right = true;
                    x++;
                }
                if(key == "s" && story >= 5){
                    if(x == 7){
                        if(story < 6){
                            story = 6;
                            code = 35;
                        }else{
                            code = 16; //Zelda_ZO
                        }
                    }
                    if(x == 13 && story == 6){
                        code = 17; //Zelda_JA
                    }
                }
                if(key == "k" && x != 1 && x != 21){
                    setSound("sword");
                    if(right){
                        d2D(x+1,y,"-");
                    }else{
                        d2D(x-1,y,"-");
                    }
                }
            }
            if(key == "i"){
                warp = 8;
                code = 21; //Zelda_M
            }
            if(unlocked == 0 && x > 11){
                x = 11;
            }
            if(x < 7){
                y = 4;
            }
            if(x > 6 && x < 12){
                y = 6;
            }
            if(x > 11 && x < 17){
                y = 3;
            }
            if(x > 16){
                y = 5;
            }
            if(unlocked == 1 && x < 12){
                unlocked = 0;
            }
            if(x == 1){
                HyGoing = 8;
                code = 11; //Zelda_HY
            }
            if(key == "m" && !(hookOk) && story >= 6){
                hookOk = true;
                hookX = x;
                hookY = y;
            }
            d2D(x,y-1,"0");
            if(right){
                d2D(x,y,"{");
            }else{
                d2D(x,y,"}");
            }
            key = '';
            show();
        break;
        case 16: //Zelda_ZO
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,2,"                     ");
            d2D(1,3,"                     ");
            d2D(1,4,"                     ");
            d2D(1,5,"    V  V  V V  V V   ");
            d2D(1,6,"    |  |  | |  | |   ");
            d2D(1,7,"(~~~H~~H~~H~H~~H~H~~~");
            if(hookOk){
                if(key == "q" && hookX > 1 && hookX > x-5){
                    hookX--;
                }
                if(key == "d" && hookX < 21 && hookX < x+5){
                    hookX++;
                }
                if(key == "z" && hookY > 1 && hookY > y-5){
                    hookY--;
                }
                if(key == "s" && hookY < 7 && hookY < y+5){
                    hookY++;
                }
                d2D(hookX,hookY,"+");
                if(key == "return"){
                    setSound("hookshot");
                    hookOk = false;
                }
            }else{
                if(key == "q"){
                    right = false;
                    x--;
                }
                if(key == "d" && x < 21){
                    right = true;
                    x++;
                }
                if(key == "k" && x != 1 && x != 21){
                    setSound("sword");
                    if(right){
                        d2D(x+1,7,"-");
                    }else{
                        d2D(x-1,7,"-");
                    }
                }
            }
            if(key == "i"){
                warp = 9;
                code = 21; //Zelda_M
            }
            if(key == "m" && !(hookOk)){
                hookOk = true;
                hookX = x;
                hookY = y;
            }
            if(x == 1){
                code = 15; //Zelda_LA
            }
            d2D(x,6,"0");
            if(right){
                d2D(x,7,"{");
            }else{
                d2D(x,7,"}");
            }
            key = '';
            show();
        break;
        case 17: //Zelda_JA
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,2,"   !                 ");
            d2D(1,3,"   !                 ");
            d2D(1,4,"   !                 ");
            d2D(1,5,"   !                 ");
            d2D(1,6,"   !                 ");
            d2D(1,7,"(~~~~,~~~~~~~~~~~~~~~");
            if(hookOk){
                if(key == "q" && hookX > 1 && hookX > x-5){
                    hookX--;
                }
                if(key == "d" && hookX < 21 && hookX < x+5){
                    hookX++;
                }
                if(key == "z" && hookY > 1 && hookY > y-5){
                    hookY--;
                }
                if(key == "s" && hookY < 7 && hookY < y+5){
                    hookY++;
                }
                d2D(hookX,hookY,"+");
                if(key == "return"){
                    setSound("hookshot");
                    hookOk = false;
                    if(hookX == 6 && hookY == 7){
                        x = 6;
                        y = 7;
                        unlocked = 1;
                        setMusic("boss");
                    }
                    if(hookX == Bpos && hookY > 4){
                        Blife--;
                    }
                }
            }else{
                if(key == "q"){
                    right = false;
                    x--;
                }
                if(key == "d" && x < 21){
                    right = true;
                    x++;
                }
                if(key == "k" && x != 1 && x != 21){
                    setSound("sword");
                    if(right){
                        d2D(x+1,7,"-");
                    }else{
                        d2D(x-1,7,"-");
                    }
                }
            }
            if(key == "i"){
                warp = 10;
                code = 21; //Zelda_M
            }
            if(key == "m" && !(hookOk)){
                hookOk = true;
                hookX = x;
                hookY = y;
            }
            if(x == 4){
                if(unlocked == 0){
                    x = 3;
                }else{
                    x = 5;
                }
            }
            if(x == 1){
                code = 15; //Zelda_LA
            }
            if(unlocked == 1){
                Bcnt++;
            }
            if(Bcnt == 200){
                if(x < Bpos){
                    Bpos--;
                }
                if(x > Bpos){
                    Bpos++;
                }
                if(x == Bpos){
                    setSound("lostLife");
                    life--;
                }
                Bcnt = 0;
            }
            if(Blife == 0){
                story = 7;
                life = 6;
                lifeMax = 6;
                code = 39;
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            d2D(Bpos,5,"B");
            d2D(Bpos,6,"i");
            d2D(Bpos,7,"a");
            d2D(x,6,"0");
            if(right){
                d2D(x,7,"{");
            }else{
                d2D(x,7,"}");
            }
            key = '';
            show();
        break;
        case 18: //Zelda_CH
            d2D(1,1,"                     ");
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,2,"                     ");
            d2D(1,3,"                     ");
            d2D(1,4,"                     ");
            d2D(1,5,"                     ");
            d2D(1,6,"(                   )");
            d2D(1,7,"_____________________");
            if(hookOk){
                if(key == "q" && hookX > 1 && hookX > x-5){
                    hookX--;
                }
                if(key == "d" && hookX < 21 && hookX < x+5){
                    hookX++;
                }
                if(key == "z" && hookY > 1 && hookY > y-5){
                    hookY--;
                }
                if(key == "s" && hookY < 7 && hookY < y+5){
                    hookY++;
                }
                d2D(hookX,hookY,"+");
                if(key == "return"){
                    setSound("hookshot");
                    hookOk = false;
                }
            }else{
                if(key == "q"){
                    right = false;
                    x--;
                }
                if(key == "d"){
                    right = true;
                    x++;
                }
                if(key == "k" && x != 1 && x != 21){
                    setSound("sword");
                    if(right){
                        d2D(x+1,6,"-");
                    }else{
                        d2D(x-1,6,"-");
                    }
                }
                if(key == "l" && bombCnt == 0 && x != 1 && x != 21 && story >= 3){
                    setSound("bombFuse");
                    if(right){
                        bCooX = x+1;
                    }else{
                        bCooX = x-1;
                    }
                    bombCnt = 120;
                }
                if(bombCnt > 0){
                    bombCnt--;
                    d2D(bCooX,6,"O");
                }
                if(bombCnt < 20 && bombCnt != 0){
                    setSound("bombBlow");
                    d2D(bCooX,6,"X");
                    if(bCooX-1 != 0){
                        d2D(bCooX-1,6,"X");
                    }
                    if(bCooX+1 != 22){
                        d2D(bCooX+1,6,"X");
                    }
                    if((x == bCooX-1 || x == bCooX || x == bCooX+1) && bombCnt == 1){
                        setSound("lostLife");
                        life--;
                    }
                }
            }
            if(key == "i"){
                warp = 11;
                code = 21; //Zelda_M
            }
            if(key == "m" && !(hookOk) && story >= 6){
                hookOk = true;
                hookX = x;
                hookY = y;
            }
            if(x == 1){
                if(story == 7){
                    code = 40;
                }
                x = 2;
            }
            if(x == 21){
                HyGoing = 11;
                code = 11; //Zelda_HY
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            d2D(x,5,"0");
            if(right){
                d2D(x,6,"{");
            }else{
                d2D(x,6,"}");
            }
            key = '';
            show();
        break;
        case 19: //Zelda_BF
            d2D(1,1,"                     ");
            for(var b=1; b <= lifeMax; b++){
                d2D(b,1,".");
            }
            for(var b=1; b <= life; b++){
                d2D(b,1,"@");
            }
            d2D(1,2,"                     ");
            d2D(1,3,"                     ");
            d2D(1,4,"                     ");
            d2D(1,5,"                     ");
            d2D(1,6,"                     ");
            d2D(1,7,"IIIIIIIIIIIIIIIIIIIII");
            if(hookOk){
                if(key == "q" && hookX > 1 && hookX > x-5){
                    hookX--;
                }
                if(key == "d" && hookX < 21 && hookX < x+5){
                    hookX++;
                }
                if(key == "z" && hookY > 1 && hookY > y-5){
                    hookY--;
                }
                if(key == "s" && hookY < 7 && hookY < y+5){
                    hookY++;
                }
                d2D(hookX,hookY,"+");
                if(key == "return"){
                    setSound("hookshot");
                    hookOk = false;
                    if(hookX == Bpos && hookY > 5 && Bstate == 0){
                        Bstate = 1;
                    }
                }
            }else{
                if(key == "q" && x > 1){
                    right = false;
                    x--;
                }
                if(key == "d" && x < 21){
                    right = true;
                    x++;
                }
                if(key == "k" && x != 1 && x != 21){
                    setSound("sword");
                    if(right){
                        sCooX = x+1;
                    }else{
                        sCooX = x-1;
                    }
                    if(sCooX == Bpos && Bstate == 2){
                        BstateCnt = 0;
                        Bstate = 0;
                        Bcnt = 0;
                        Blife--;
                    }
                    d2D(sCooX,6,"-");
                }
                if(key == "l" && bombCnt == 0 && x != 1 && x != 21){
                    setSound("bombFuse");
                    if(right){
                        bCooX = x+1;
                    }else{
                        bCooX = x-1;
                    }
                    bombCnt = 120;
                }
                if(bombCnt > 0){
                    bombCnt--;
                    d2D(bCooX,6,"O");
                }
                if(bombCnt < 20 && bombCnt != 0){
                    setSound("bombBlow");
                    d2D(bCooX,6,"X");
                    if(bCooX-1 != 0){
                        d2D(bCooX-1,6,"X");
                    }
                    if(bCooX+1 != 22){
                        d2D(bCooX+1,6,"X");
                    }
                    if(x > bCooX-2 && x < bCooX+2 && bombCnt == 1){
                        setSound("lostLife");
                        life--;
                    }
                    if(Bpos > bCooX-2 && Bpos < bCooX+2 && Bstate == 1){
                        BstateCnt = 0;
                        Bstate = 2;
                    }
                }
            }
            if(key == "i"){
                warp = 11;
                code = 21; //Zelda_M
            }
            if(key == "m" && !(hookOk)){
                hookOk = true;
                hookX = x;
                hookY = y;
            }
            if(Bstate == 0){
                Bcnt++;
            }
            if(Bcnt == 400){
                if(x < Bpos){
                    Bright = false;
                    Bpos--;
                }
                if(x > Bpos){
                    Bright = true;
                    Bpos++;
                }
                if(x == Bpos){
                    setSound("lostLife");
                    life--;
                }
                Bcnt = 0;
            }
            if(Bstate != 0){
                BstateCnt++;
            }
            if(BstateCnt == 350){
                Bstate = 0;
                BstateCnt = 0;
            }

            if(Blife == 0){
                code = 41; //End
            }
            if(life == 0){
                code = 20; //Zelda_0
            }
            if(Bstate == 2){
                d2D(Bpos,6,"A");
            }else{
                d2D(Bpos,5,"A");
                if(Bstate == 1){
                    if(Bright){
                        d2D(Bpos,6,"d");
                    }else{
                        d2D(Bpos,6,"g");
                    }
                }else{
                    if(Bright){
                        d2D(Bpos,6,"D");
                    }else{
                        d2D(Bpos,6,"G");
                    }
                }
            }
            d2D(x,5,"0");
            if(right){
                d2D(x,6,"{");
            }else{
                d2D(x,6,"}");
            }
            key = '';
            show();
        break;
        case 20: //Zelda_0
            if(key == "return"){
                life = lifeMax;
                code = 0; //ZeldaRTP
            }
        break;
        case 21: //Zelda_M
            if(key == "esc"){
                code = warp + 7;
            }
        break;
        case 22: //Text... (Zelda_BO)
            if(key == "return"){
                code++;
            }
        break;
        case 23: //...
            if(key == "return"){
                code = 9; //Zelda_BO
            }
        break;
        case 24: //Text.. (Zelda_AR)
            if(key == "return"){
                code = 8; //Zelda_KO
            }
        break;
        case 25: //Text... (Zelda_GO)
            if(key == "return"){
                code++;
            }
        break;
        case 26: //...
            if(key == "return"){
                code++;
            }
        break;
        case 27: //...
            if(key == "return"){
                code++;
            }
        break;
        case 28: //...
            if(key == "return"){
                code++;
            }
        break;
        case 29: //...
            if(key == "return"){
                code++;
            }
        break;
        case 30: //...
            if(key == "return"){
                code++;
            }
        break;
        case 31: //...
            if(key == "return"){
                code++;
            }
        break;
        case 32: //...
            if(key == "return"){
                code++;
            }
        break;
        case 33: //...
            if(key == "return"){
                code = 13; //Zelda_GO
            }
        break;
        case 34: //Text... (Zelda_DO)
            if(key == "return"){
                code = 12; //Zelda_MT
            }
        break;
        case 35: //Text... (Zelda_ZO)
            if(key == "return"){
                code++;
            }
        break;
        case 36: //...
            if(key == "return"){
                code++;
            }
        break;
        case 37: //...
            if(key == "return"){
                code++;
            }
        break;
        case 38: //...
            if(key == "return"){
                code = 16; //Zelda_ZO
            }
        break;
        case 39: //Text... (Zelda_JA)
            if(key == "return"){
                code = 15; //Zelda_LA
            }
        break;
        case 40: //Text... (Zelda_BF)
            if(key == "return"){
                code = 19; //Zelda_BF
            }
        break;
        case 41: //End
            if(!(end)){
                cnt++;
            }
            if(cnt == 5){
                cnt = 0;
                d2D(x,y,"*")
                show()
                x++;
                if(x > 21){
                    x = 1;
                    y++;
                }
                if(y == 8){
                    end = true;
                    text(0,"  THE  END");
                }
            }
        break;
    }
}
 </script>
</body>
</html>
